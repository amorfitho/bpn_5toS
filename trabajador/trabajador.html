<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Vista Trabajador</title>
  <link rel="stylesheet" href="../agenda/agenda.css" />
</head>
<body>
  <h1>Vista Trabajador</h1>

  <!-- 1. Carga del fichero BD.txt -->
  <label for="fileInput">Cargar BD.txt:</label>
  <input type="file" id="fileInput" accept=".txt" />
  <hr/>
  <!-- 1. Carga del fichero exel base de datos -->
  <label for="excelInput">Selecciona Excel destino:</label>
  <input type="file" id="excelInput" accept=".xlsx,.xls" />

  <!-- 2. Selector de citas -->
  <div id="selectorCitas" style="display:none; margin-top:1em;">
    <label for="citaSelect">Selecciona una cita:</label>
    <select id="citaSelect">
      <option value="">-- elige --</option>
    </select>
  </div>

  <!-- 3. Contenedor para mostrar datos de la cita + formulario -->
  <div id="detalleYFormulario" style="display:none; margin-top:2em;">
    <h2>Datos de la Cita</h2>
    <pre id="datosCita"></pre>

    <h2>Formulario de Atención</h2>
    <form id="trabajadorForm">
      <div>
        <label>Razón Atención Servicio<br/>
          <input type="text" name="razonServicio" required />
        </label>
      </div>

      <div>
        <label>Hora atención<br/>
          <input type="time" name="horaAtencion" required />
        </label>
      </div>

      <div>
        <label>RUT especialista<br/>
          <input type="text" name="rutEspecialista" required />
        </label>
      </div>

      <div>
        <label>Nombre especialista<br/>
          <input type="text" name="nombreEspecialista" required />
        </label>
      </div>

      <div>
        <span>¿Se emite receta?</span><br/>
        <label><input type="radio" name="emiteReceta" value="sí" required /> Sí</label>
        <label><input type="radio" name="emiteReceta" value="no" /> No</label>
      </div>

      <div>
        <span>¿Se emite diagnóstico?</span><br/>
        <label><input type="radio" name="emiteDiagnostico" value="sí" required /> Sí</label>
        <label><input type="radio" name="emiteDiagnostico" value="no" /> No</label>
      </div>

      <div id="campoDiagnostico" style="display:none;">
        <label>Diagnóstico<br/>
          <textarea name="diagnostico" rows="2"></textarea>
        </label>
      </div>

      <div class="campo">
        <label for="costoServicioCliente">Costo Servicio (cliente)</label>
          <input type="number" id="costoServicioCliente" name="costoServicioCliente" step="0.01" required />
      </div>

      <div class="campo">
        <label for="costoPromedioMedicamento">Costo Promedio Medicamento(s) (cliente)</label>
          <input type="number" id="costoPromedioMedicamento" name="costoPromedioMedicamento" step="0.01" required />
      </div>

      <div>
        <label>Insumos<br/>
          <input type="text" name="insumos" />
        </label>
      </div>

      <div>
        <label>Tipo de costo<br/>
          <select name="tipoCosto" required>
            <option value="">--Selecciona el Tipo de costo--</option>
            <!--opciones de servicios -->
            <option>Por Uso</option>
            <option>Mensual</option>
            <option>Mensual/Uso</option>
          </select>
        </label>
      </div>

      <div class="campo">
        <label for="insumosCostoVeterinaria">Insumos (costo promedio veterinaria)</label>
        <input type="number" id="insumosCostoVeterinaria" name="insumosCostoVeterinaria" step="0.01" required />
      </div>

      <!-- NUEVO: mostrar el cálculo -->
      <div class="campo">
        <label for="ingresosVeterinariaDisplay">Ingresos Veterinaria</label>
        <input type="text" id="ingresosVeterinariaDisplay" readonly value="0.00" />
      </div>

      <button type="submit">Guardar Atención</button>
    </form>
  </div>

  <script src="tarbajador.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
</body>
</html>